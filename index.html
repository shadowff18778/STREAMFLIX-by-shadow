import React, { useState, useEffect, useRef } from 'react';

// Main App Component
const App = () => {
  const [currentPage, setCurrentPage] = useState('home');
  const [selectedMovie, setSelectedMovie] = useState(null);
  const [featuredMovieIndex, setFeaturedMovieIndex] = useState(0);

  // Données de films factices pour la démonstration
  const movies = [
    {
      id: '1',
      title: 'Le Seigneur des Anneaux : La Communauté de l\'Anneau',
      genre: 'Fantaisie',
      description: 'Un jeune hobbit hérite d\'un anneau puissant et doit le détruire pour sauver le monde. Une aventure épique commence, pleine de dangers et d\'amitié.',
      imageUrl: 'https://placehold.co/400x600/1a202c/e53e3e?text=LOTR',
      trailerUrl: 'https://www.youtube.com/embed/aY1rQGj-T7E',
      director: 'Peter Jackson',
      cast: 'Elijah Wood, Ian McKellen, Orlando Bloom',
      releaseYear: 2001,
      duration: '2h 58min',
      rating: '9.0/10',
    },
    {
      id: '2',
      title: 'Interstellar',
      genre: 'Science-fiction',
      description: 'Un groupe d\'explorateurs voyage à travers un trou de ver dans l\'espace pour assurer la survie de l\'humanité. Ils doivent trouver une nouvelle maison avant qu\'il ne soit trop tard.',
      imageUrl: 'https://placehold.co/400x600/1a202c/e53e3e?text=Interstellar',
      trailerUrl: 'https://www.youtube.com/embed/zSWdZVtXT7E',
      director: 'Christopher Nolan',
      cast: 'Matthew McConaughey, Anne Hathaway, Jessica Chastain',
      releaseYear: 2014,
      duration: '2h 49min',
      rating: '8.6/10',
    },
    {
      id: '3',
      title: 'Inception',
      genre: 'Science-fiction',
      description: 'Un voleur qui dérobe des secrets d\'entreprise en s\'infiltrant dans les rêves est chargé d\'une tâche inverse : implanter une idée. Une mission complexe et dangereuse.',
      imageUrl: 'https://placehold.co/400x600/1a202c/e53e3e?text=Inception',
      trailerUrl: 'https://www.youtube.com/embed/YoO7b0jJ5zI',
      director: 'Christopher Nolan',
      cast: 'Leonardo DiCaprio, Joseph Gordon-Levitt, Elliot Page',
      releaseYear: 2010,
      duration: '2h 28min',
      rating: '8.8/10',
    },
    {
      id: '4',
      title: 'Matrix',
      genre: 'Science-fiction',
      description: 'Un programmeur découvre que la réalité est une simulation et se joint à une rébellion contre les machines. Il doit choisir entre la pilule bleue et la pilule rouge.',
      imageUrl: 'https://placehold.co/400x600/1a202c/e53e3e?text=Matrix',
      trailerUrl: 'https://www.youtube.com/embed/vKQi3bBA1y8',
      director: 'Lana Wachowski, Lilly Wachowski',
      cast: 'Keanu Reeves, Laurence Fishburne, Carrie-Anne Moss',
      releaseYear: 1999,
      duration: '2h 16min',
      rating: '8.7/10',
    },
    {
      id: '5',
      title: 'Parasite',
      genre: 'Thriller',
      description: 'Une famille pauvre s\'immisce dans la vie d\'une famille riche, avec des conséquences inattendues et sombres. Un drame social captivant.',
      imageUrl: 'https://placehold.co/400x600/1a202c/e53e3e?text=Parasite',
      trailerUrl: 'https://www.youtube.com/embed/5xH0HfJH_oY',
      director: 'Bong Joon-ho',
      cast: 'Song Kang-ho, Choi Woo-shik, Park So-dam',
      releaseYear: 2019,
      duration: '2h 12min',
      rating: '8.5/10',
    },
    {
      id: '6',
      title: 'Blade Runner 2049',
      genre: 'Science-fiction',
      description: 'Un jeune blade runner découvre un secret enfoui qui pourrait plonger ce qui reste de la société dans le chaos. Il doit traquer un ancien blade runner.',
      imageUrl: 'https://placehold.co/400x600/1a202c/e53e3e?text=Blade+Runner',
      trailerUrl: 'https://www.youtube.com/embed/gCcx85zFxzU',
      director: 'Denis Villeneuve',
      cast: 'Ryan Gosling, Harrison Ford, Ana de Armas',
      releaseYear: 2017,
      duration: '2h 44min',
      rating: '8.0/10',
    },
  ];

  const categories = [
    { name: 'Populaires', movies: movies.slice(0, 3) },
    { name: 'Nouveautés', movies: movies.slice(3, 6) },
    { name: 'Recommandés', movies: movies.slice(0, 6).sort(() => 0.5 - Math.random()) }, // Ordre aléatoire
  ];

  // Carousel logic for Hero Section
  useEffect(() => {
    const interval = setInterval(() => {
      setFeaturedMovieIndex((prevIndex) => (prevIndex + 1) % movies.length);
    }, 8000); // Change movie every 8 seconds
    return () => clearInterval(interval);
  }, [movies.length]);

  const openMovieDetails = (movie) => {
    setSelectedMovie(movie);
  };

  const closeMovieDetails = () => {
    setSelectedMovie(null);
  };

  // Styles globaux pour les animations et le design
  const globalStyles = `
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&display=swap'); /* Pour un look plus futuriste */

    body {
      font-family: 'Inter', sans-serif;
      background-color: #0a0a0a; /* Arrière-plan très sombre */
      color: #e0e0e0; /* Texte gris clair */
      margin: 0;
      padding: 0;
      overflow-x: hidden; /* Empêche le défilement horizontal */
      scroll-behavior: smooth; /* Défilement doux */
    }

    /* Animations générales */
    .fade-in {
      animation: fadeIn 0.8s ease-out forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .slide-up {
      animation: slideUp 0.6s ease-out forwards;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(50px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Effets de survol pour les cartes */
    .scale-lift-shadow {
      transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.3s ease-in-out;
    }
    .scale-lift-shadow:hover {
      transform: translateY(-10px) scale(1.03);
      box-shadow: 0 20px 40px rgba(229, 62, 62, 0.7); /* Ombre rouge plus prononcée */
    }

    /* Styles des boutons */
    .button-primary {
      background-color: #e53e3e; /* Rouge */
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 9999px; /* Entièrement arrondi */
      font-weight: 600;
      transition: background-color 0.3s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.3s ease-in-out;
      box-shadow: 0 4px 15px rgba(229, 62, 62, 0.4);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      position: relative;
      overflow: hidden;
    }
    .button-primary::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      transition: width 0.4s ease-out, height 0.4s ease-out, top 0.4s ease-out, left 0.4s ease-out;
      transform: translate(-50%, -50%);
      z-index: 0;
    }
    .button-primary:hover::before {
      width: 200%;
      height: 200%;
      top: 0;
      left: 0;
    }
    .button-primary:hover {
      background-color: #c53030; /* Rouge plus foncé */
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(229, 62, 62, 0.7);
    }
    .button-primary:active {
      transform: translateY(0);
      box-shadow: 0 4px 15px rgba(229, 62, 62, 0.4);
    }

    /* Overlay de la modale */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95); /* Arrière-plan plus sombre pour la modale */
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden; /* Cache la modale complètement */
      transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
    }

    .modal-overlay.open {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: #1a202c; /* Gris foncé */
      border-radius: 2rem; /* Coins plus arrondis */
      max-width: 95%; /* Plus large sur les grands écrans */
      max-height: 95%;
      overflow-y: auto;
      transform: translateY(30px) scale(0.9);
      opacity: 0;
      transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.5s ease-in-out; /* Animation plus rebondissante */
      position: relative;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.8);
      border: 1px solid rgba(229, 62, 62, 0.3); /* Bordure subtile */
    }

    .modal-overlay.open .modal-content {
      transform: translateY(0) scale(1);
      opacity: 1;
    }

    /* Barre de défilement personnalisée pour la modale */
    .modal-content::-webkit-scrollbar {
      width: 8px;
    }
    .modal-content::-webkit-scrollbar-track {
      background: #2d3748;
      border-radius: 10px;
    }
    .modal-content::-webkit-scrollbar-thumb {
      background: #e53e3e;
      border-radius: 10px;
    }
    .modal-content::-webkit-scrollbar-thumb:hover {
      background: #c53030;
    }

    /* Animation de l'arrière-plan de la section Hero */
    @keyframes hero-bg-pan {
      0% { background-position: 0% 0%; }
      50% { background-position: 100% 100%; }
      100% { background-position: 0% 0%; }
    }
    .animate-hero-bg {
      animation: hero-bg-pan 90s infinite alternate ease-in-out;
      background-size: 180% 180%; /* Permet un mouvement de panoramique plus grand */
    }

    /* Animation du texte de la section Hero */
    .animate-text-in {
      animation: textSlideIn 1s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }
    @keyframes textSlideIn {
      to { opacity: 1; transform: translateY(0); }
    }

    /* Effet miroir liquide/vitre pour le texte du pied de page */
    .liquid-mirror-text {
      font-family: 'Orbitron', sans-serif; /* Police plus techno */
      font-size: 1.5rem; /* Plus grand */
      font-weight: 700;
      color: #e53e3e; /* Rouge vif */
      text-shadow: 0 0 10px rgba(229, 62, 62, 0.8), 0 0 20px rgba(229, 62, 62, 0.6), 0 0 30px rgba(229, 62, 62, 0.4);
      position: relative;
      display: inline-block;
      overflow: hidden; /* Pour l'effet de brillance */
    }

    .liquid-mirror-text::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 0;
      height: 200%;
      background: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.3) 50%, rgba(255, 255, 255, 0) 100%);
      transform: rotate(45deg);
      animation: shine 3s infinite linear;
      opacity: 0.7;
    }

    @keyframes shine {
      0% { left: -50%; }
      100% { left: 150%; }
    }

    /* Effet de particules subtil */
    .particles-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }
    .particle {
      position: absolute;
      background-color: rgba(229, 62, 62, 0.5); /* Petites particules rouges */
      border-radius: 50%;
      opacity: 0;
      animation: particle-move 20s infinite ease-in-out;
    }

    @keyframes particle-move {
      0% { transform: translate(0, 0) scale(0); opacity: 0; }
      10% { opacity: 1; transform: scale(1); }
      90% { opacity: 1; }
      100% { transform: translate(var(--x), var(--y)) scale(0); opacity: 0; }
    }
  `;

  // Composant d'en-tête
  const Header = ({ currentPage, setCurrentPage }) => (
    <header className="bg-gradient-to-r from-gray-900 to-black text-white p-4 shadow-lg sticky top-0 z-50 rounded-b-xl border-b-2 border-red-800">
      <div className="container mx-auto flex flex-col sm:flex-row justify-between items-center">
        <div className="text-3xl font-bold text-red-500 tracking-wider cursor-pointer transform hover:scale-110 transition-transform duration-300 mb-4 sm:mb-0 logo-glow" onClick={() => setCurrentPage('home')}>
          STREAMFLIX
        </div>
        <nav>
          <ul className="flex space-x-4 sm:space-x-6">
            <li>
              <a href="#" onClick={() => setCurrentPage('home')} className={`text-lg font-medium hover:text-red-400 transition-colors duration-200 relative group ${currentPage === 'home' ? 'text-red-500' : ''}`}>
                Accueil
                <span className={`absolute bottom-0 left-0 w-full h-0.5 bg-red-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 ${currentPage === 'home' ? 'scale-x-100' : ''}`}></span>
              </a>
            </li>
            <li>
              <a href="#" onClick={() => setCurrentPage('movies')} className={`text-lg font-medium hover:text-red-400 transition-colors duration-200 relative group ${currentPage === 'movies' ? 'text-red-500' : ''}`}>
                Films
                <span className={`absolute bottom-0 left-0 w-full h-0.5 bg-red-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 ${currentPage === 'movies' ? 'scale-x-100' : ''}`}></span>
              </a>
            </li>
            <li>
              <a href="#" onClick={() => setCurrentPage('series')} className={`text-lg font-medium hover:text-red-400 transition-colors duration-200 relative group ${currentPage === 'series' ? 'text-red-500' : ''}`}>
                Séries
                <span className={`absolute bottom-0 left-0 w-full h-0.5 bg-red-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 ${currentPage === 'series' ? 'scale-x-100' : ''}`}></span>
              </a>
            </li>
            <li>
              <a href="#" onClick={() => setCurrentPage('search')} className={`text-lg font-medium hover:text-red-400 transition-colors duration-200 relative group ${currentPage === 'search' ? 'text-red-500' : ''}`}>
                Recherche
                <span className={`absolute bottom-0 left-0 w-full h-0.5 bg-red-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 ${currentPage === 'search' ? 'scale-x-100' : ''}`}></span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
      {/* Moved the style block outside the component to fix the warning */}
    </header>
  );

  // Composant de la section Héroïque
  const HeroSection = ({ openMovieDetails, movies, featuredMovieIndex }) => {
    const featuredMovie = movies[featuredMovieIndex];
    const heroRef = useRef(null);

    // Parallax effect
    useEffect(() => {
      const handleScroll = () => {
        if (heroRef.current) {
          const scrollY = window.scrollY;
          heroRef.current.style.backgroundPositionY = `${-scrollY * 0.3}px`;
        }
      };
      window.addEventListener('scroll', handleScroll);
      return () => window.removeEventListener('scroll', handleScroll);
    }, []);

    return (
      <section
        ref={heroRef}
        className="relative h-[60vh] md:h-[70vh] lg:h-[80vh] flex items-center justify-center text-white overflow-hidden rounded-b-3xl shadow-xl transition-all duration-1000 ease-in-out"
        style={{ backgroundImage: `url(${featuredMovie.imageUrl.replace('400x600', '1920x1080')})`, backgroundSize: 'cover', backgroundPosition: 'center' }}
      >
        {/* Effet de particules subtil */}
        <div className="particles-bg">
          {Array.from({ length: 50 }).map((_, i) => (
            <div
              key={i}
              className="particle"
              style={{
                width: `${Math.random() * 5 + 2}px`,
                height: `${Math.random() * 5 + 2}px`,
                left: `${Math.random() * 100}%`,
                top: `${Math.random() * 100}%`,
                animationDelay: `${Math.random() * 20}s`,
                '--x': `${Math.random() * 200 - 100}px`, // Random horizontal movement
                '--y': `${Math.random() * 200 - 100}px`, // Random vertical movement
              }}
            ></div>
          ))}
        </div>

        {/* Superposition de dégradé sombre */}
        <div className="absolute inset-0 bg-gradient-to-t from-black via-black/70 to-transparent"></div>

        {/* Contenu */}
        <div className="relative z-10 text-center max-w-4xl p-6">
          <h1 className="text-4xl md:text-6xl font-extrabold mb-4 drop-shadow-lg text-red-400 animate-text-in" style={{ animationDelay: '0.2s' }}>
            {featuredMovie.title}
          </h1>
          <p className="text-lg md:text-xl mb-8 leading-relaxed drop-shadow-md animate-text-in" style={{ animationDelay: '0.4s' }}>
            {featuredMovie.description}
          </p>
          <div className="flex justify-center gap-4 animate-text-in" style={{ animationDelay: '0.6s' }}>
            <button
              className="button-primary px-8 py-3 text-xl"
              onClick={() => openMovieDetails(featuredMovie)}
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6">
                <path fillRule="evenodd" d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 20.003c-1.25.687-2.779-.235-2.779-1.643V5.653Z" clipRule="evenodd" />
              </svg>
              Regarder maintenant
            </button>
            <button
              className="button-primary bg-transparent border-2 border-red-500 hover:bg-red-500 hover:border-red-500 transition-all duration-300 px-8 py-3 text-xl"
              onClick={() => openMovieDetails(featuredMovie)}
            >
              Plus d'infos
            </button>
          </div>
        </div>
      </section>
    );
  };

  // Composant de carte de film
  const MovieCard = ({ movie, openMovieDetails }) => (
    <div
      className="bg-gray-800 rounded-xl overflow-hidden shadow-lg transition-all duration-300 cursor-pointer relative group scale-lift-shadow"
      onClick={() => openMovieDetails(movie)}
    >
      <img
        src={movie.imageUrl}
        alt={movie.title}
        className="w-full h-64 object-cover object-center rounded-t-xl transition-transform duration-300 group-hover:scale-110"
        onError={(e) => { e.target.onerror = null; e.target.src = `https://placehold.co/400x600/1a202c/e53e3e?text=Image+Non+Trouvée`; }}
      />
      {/* Overlay de lecture au survol */}
      <div className="absolute inset-0 bg-black bg-opacity-70 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-20 h-20 text-red-500 transform group-hover:scale-110 transition-transform duration-300">
          <path fillRule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm14.024-.335a.75.75 0 0 0 0-1.33L9.53 7.214A.75.75 0 0 0 8.25 7.877v8.246a.75.75 0 0 0 1.28.662l6.744-3.654Z" clipRule="evenodd" />
        </svg>
      </div>
      <div className="p-4 relative">
        <h3 className="text-xl font-semibold text-red-400 mb-2 truncate">{movie.title}</h3>
        <p className="text-gray-400 text-sm flex justify-between items-center">
          <span>{movie.genre}</span>
          <span className="bg-red-700 text-white text-xs px-2 py-1 rounded-full">{movie.rating}</span>
        </p>
      </div>
    </div>
  );

  // Composant de grille de contenu
  const ContentGrid = ({ categories, openMovieDetails }) => {
    const sectionRefs = useRef([]);

    // Animation au défilement
    useEffect(() => {
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add('slide-up');
              entry.target.style.animationDelay = `${parseFloat(entry.target.dataset.delay)}s`;
              observer.unobserve(entry.target); // Stop observing once animated
            }
          });
        },
        { threshold: 0.1 } // Trigger when 10% of the element is visible
      );

      sectionRefs.current.forEach((ref) => {
        if (ref) observer.observe(ref);
      });

      return () => {
        sectionRefs.current.forEach((ref) => {
          if (ref) observer.unobserve(ref);
        });
      };
    }, [categories]);

    return (
      <section className="container mx-auto py-12 px-4">
        {categories.map((category, index) => (
          <div
            key={category.name}
            className="mb-12 opacity-0" // Start hidden for scroll animation
            ref={(el) => (sectionRefs.current[index] = el)}
            data-delay={0.1 * index}
          >
            <h2 className="text-3xl font-bold text-white mb-6 border-b-2 border-red-600 pb-2 inline-block">
              {category.name}
            </h2>
            <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6">
              {category.movies.map((movie) => (
                <MovieCard key={movie.id} movie={movie} openMovieDetails={openMovieDetails} />
              ))}
            </div>
          </div>
        ))}
      </section>
    );
  };

  // Composant de pied de page
  const Footer = () => (
    <footer className="bg-gray-900 text-gray-400 py-8 mt-12 rounded-t-xl shadow-inner border-t-2 border-red-800">
      <div className="container mx-auto text-center">
        <p>&copy; {new Date().getFullYear()} STREAMFLIX. Tous droits réservés.</p>
        <div className="flex justify-center space-x-6 mt-4">
          <a href="#" className="hover:text-red-500 transition-colors duration-200">Conditions d'utilisation</a>
          <a href="#" className="hover:text-red-500 transition-colors duration-200">Politique de confidentialité</a>
          <a href="#" className="hover:text-red-500 transition-colors duration-200">Contact</a>
        </div>
        <div className="mt-8">
          <span className="liquid-mirror-text">Template by Shadow</span>
        </div>
      </div>
    </footer>
  );

  // Composant de modale des détails du film
  const MovieDetailsModal = ({ movie, onClose }) => {
    if (!movie) return null;

    return (
      <div className={`modal-overlay ${movie ? 'open' : ''}`} onClick={onClose}>
        <div className="modal-content p-6 md:p-8 lg:p-10 w-full max-w-4xl" onClick={(e) => e.stopPropagation()}>
          <button
            className="absolute top-4 right-4 text-gray-400 hover:text-red-500 text-4xl font-bold transition-colors duration-200 z-10"
            onClick={onClose}
            aria-label="Fermer"
          >
            &times;
          </button>
          <div className="flex flex-col md:flex-row gap-6 md:gap-8">
            <div className="flex-shrink-0 w-full md:w-1/3">
              <img
                src={movie.imageUrl.replace('400x600', '600x900')}
                alt={movie.title}
                className="w-full h-auto rounded-lg shadow-xl"
                onError={(e) => { e.target.onerror = null; e.target.src = `https://placehold.co/600x900/1a202c/e53e3e?text=Image+Non+Trouvée`; }}
              />
            </div>
            <div className="flex-grow">
              <h2 className="text-3xl md:text-4xl font-bold text-red-400 mb-4">{movie.title}</h2>
              <div className="flex flex-wrap gap-x-4 gap-y-2 text-gray-300 text-lg mb-4">
                <span><span className="font-semibold text-red-300">Genre:</span> {movie.genre}</span>
                <span><span className="font-semibold text-red-300">Année:</span> {movie.releaseYear}</span>
                <span><span className="font-semibold text-red-300">Durée:</span> {movie.duration}</span>
                <span><span className="font-semibold text-red-300">Note:</span> {movie.rating}</span>
              </div>
              <p className="text-gray-200 leading-relaxed mb-6 text-base md:text-lg">{movie.description}</p>

              <div className="mb-6">
                <h3 className="text-xl font-semibold text-white mb-3">Réalisateur & Acteurs</h3>
                <p className="text-gray-300"><span className="font-semibold text-red-300">Réalisateur:</span> {movie.director}</p>
                <p className="text-gray-300"><span className="font-semibold text-red-300">Acteurs:</span> {movie.cast}</p>
              </div>

              {movie.trailerUrl && (
                <div className="mb-6">
                  <h3 className="text-xl font-semibold text-white mb-3">Bande-annonce</h3>
                  <div className="relative" style={{ paddingBottom: '56.25%', height: 0 }}>
                    <iframe
                      className="absolute top-0 left-0 w-full h-full rounded-lg shadow-lg"
                      src={movie.trailerUrl}
                      title={`${movie.title} Bande-annonce`}
                      frameBorder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                      allowFullScreen
                    ></iframe>
                  </div>
                </div>
              )}
              <button className="button-primary px-6 py-2 text-lg w-full md:w-auto">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-5 h-5">
                  <path fillRule="evenodd" d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 20.003c-1.25.687-2.779-.235-2.779-1.643V5.653Z" clipRule="evenodd" />
                </svg>
                Commencer la lecture
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  };

  // Logique de rendu principale basée sur l'état de la page actuelle
  const renderPage = () => {
    switch (currentPage) {
      case 'home':
        return (
          <>
            <HeroSection openMovieDetails={openMovieDetails} movies={movies} featuredMovieIndex={featuredMovieIndex} />
            <ContentGrid categories={categories} openMovieDetails={openMovieDetails} />
          </>
        );
      case 'movies':
        return (
          <section className="container mx-auto py-12 px-4 fade-in">
            <h2 className="text-4xl font-bold text-white mb-8 border-b-2 border-red-600 pb-4">Tous les Films</h2>
            <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6">
              {movies.map((movie) => (
                <MovieCard key={movie.id} movie={movie} openMovieDetails={openMovieDetails} />
              ))}
            </div>
          </section>
        );
      case 'series':
        return (
          <section className="container mx-auto py-12 px-4 fade-in">
            <h2 className="text-4xl font-bold text-white mb-8 border-b-2 border-red-600 pb-4">Toutes les Séries</h2>
            <p className="text-gray-300 text-lg mb-8">Contenu des séries à venir...</p>
            {/* Espace réservé pour le contenu des séries */}
            <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6 mt-8">
              {movies.slice(0, 3).map((movie) => ( // Réutilisation des cartes de films pour la démo
                <MovieCard key={movie.id + 's'} movie={{...movie, title: movie.title + ' (Série)'}} openMovieDetails={openMovieDetails} />
              ))}
            </div>
          </section>
        );
      case 'search':
        return (
          <section className="container mx-auto py-12 px-4 fade-in">
            <h2 className="text-4xl font-bold text-white mb-8 border-b-2 border-red-600 pb-4">Recherche</h2>
            <div className="flex justify-center mb-8">
              <input
                type="text"
                placeholder="Rechercher un film ou une série..."
                className="w-full max-w-md p-4 rounded-full bg-gray-800 text-white border border-gray-700 focus:outline-none focus:border-red-500 transition-all duration-300 shadow-inner"
              />
              <button className="button-primary ml-4 px-6 py-2 rounded-full">
                Rechercher
              </button>
            </div>
            <p className="text-gray-300 text-lg text-center">Les résultats de recherche apparaîtront ici.</p>
          </section>
        );
      default:
        return null;
    }
  };

  return (
    <div className="min-h-screen flex flex-col bg-black">
      {/* Intégration des styles globaux */}
      <style>{globalStyles}</style>
      {/* Script Tailwind CSS */}
      <script src="https://cdn.tailwindcss.com"></script>
      <Header currentPage={currentPage} setCurrentPage={setCurrentPage} />
      <main className="flex-grow">
        {renderPage()}
      </main>
      <Footer />
      <MovieDetailsModal movie={selectedMovie} onClose={closeMovieDetails} />
    </div>
  );
};

export default App;
